<app-admin-back></app-admin-back>


<div>
    FILTER BY:
    <button (click)="clearFilters()"> Clear filters</button>
</div>


<app-admin-clients-view #aclv> </app-admin-clients-view>
<app-admin-clients-delete #acld (refreshList)="refreshList($event)"></app-admin-clients-delete>

<div>
    <mat-form-field appearance="fill">
        <mat-label>Filter id</mat-label>
        <input matInput (keyup)="applyStringFilter('idC',$event)" placeholder="Search by id" #id />
    </mat-form-field>

    <mat-form-field appearance="fill">
        <mat-label>Name</mat-label>
        <input matInput (keyup)="applyStringFilter('name', $event)" placeholder="Search by name" #name />
    </mat-form-field>

    <mat-form-field appearance="fill">
        <mat-label>Surname</mat-label>
        <input matInput (keyup)="applyStringFilter('surname', $event)" placeholder="Search by surname" #surname />
    </mat-form-field>

    <mat-form-field appearance="fill">
        <mat-label>Filter email</mat-label>
        <input matInput (keyup)="applyStringFilter('email',$event)" placeholder="Search by email" #email />
    </mat-form-field>

    <mat-form-field appearance="fill">
        <mat-label>Filter phone number</mat-label>
        <input matInput (keyup)="applyStringFilter('phoneNumber',$event)" placeholder="Search by phone number"
            #phoneNumber />
    </mat-form-field>

    <mat-form-field appearance="fill">
        <mat-label>Address</mat-label>
        <input matInput (keyup)="applyStringFilter('address', $event)" placeholder="Search by address" #address />
    </mat-form-field>
</div>

<div *ngIf="clients">
    <!--<table mat-table matSort (matSortChange)="sortData($event)" [dataSource]="dataSource"> -->
    <table mat-table matSort (matSortChange)="sortData($event)" [dataSource]="dataSource">

        <!-- Id Column -->
        <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Id </th>
            <td mat-cell *matCellDef="let client"> {{client.idC}} </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
            <td mat-cell *matCellDef="let client"> {{client.name}} </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="surname">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Surname </th>
            <td mat-cell *matCellDef="let client"> {{client.surname}} </td>
        </ng-container>

        <!-- Email Column -->
        <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
            <td mat-cell *matCellDef="let client"> {{client.email}} </td>
        </ng-container>

        <!-- Phone Column -->
        <ng-container matColumnDef="phone">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Phone Number </th>
            <td mat-cell *matCellDef="let client"> {{client.phoneNumber}} </td>
        </ng-container>


        <!-- City Column -->
        <ng-container matColumnDef="address">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Address </th>
            <td mat-cell *matCellDef="let client"> {{client.address.city}}, {{client.address.street}}
                {{client.address.number}} </td>
        </ng-container>

        <!-- Action Column -->
        <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef> Action </th>
            <td mat-cell *matCellDef="let client">
                <button (click)="view(client)"> VIEW</button>
                 <button *ngIf="client.active" (click)="delete(client)"> DELETE</button>
        <button *ngIf="!client.active" (click)="activate(client.idC)"> ACTIVATE</button>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>